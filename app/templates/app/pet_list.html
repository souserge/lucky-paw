{% load staticfiles %} {% load bootstrap_tags %}

<link rel="stylesheet" href="{% static 'css/pet_card.css' %}">
<script>
  $(() => {
    $(".pet-filter > .form-group").addClass('col-md-4 col-sm-6')

    $('#petListFilterForm').on("submit", (event) => {
      event.preventDefault()
      loadPetCards()
    })
  })

  function loadPetCards() {
    const $elem = $('#petListFilterForm')
    const data = $elem.serialize()

    $("#petCards").html(`<img src="https://orig00.deviantart.net/05c8/f/2017/119/a/7/__we_can_stay_forever_young___by_mellowkun-db7keio.gif" style="width: 64px; height:auto;">`)
    $.get($elem.attr('data-url'), data).done((petList) => {
      $("#petCards").html(petList)
    })
  }
</script>


<form id="petListFilterForm" data-url="{% url 'pet_list_cards' %}" method="get">
  <div class="pet-filter row">
    {{ base_filter.form|as_bootstrap }}
    <a class="col-md-4 my-5" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
      Show advanced filters
      <i class="fa fa-angle-down"></i>
    </a>
  </div>
  <div class="collapse" id="collapseExample">
    <div class="pet-filter row">
      {{ advanced_filter.form|as_bootstrap }}
    </div>
  </div>
  <button id="petListFilterFormButton" class="ml-1 btn btn-info d-block" type="submit">Find your pet</button>
</form>
<div id="petCards">
</div>